<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMS Admin Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: #0a0e27; color: #fff; }
        
        /* Navigation */
        nav { background: #1a1f3a; padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        nav a { color: #667eea; text-decoration: none; margin: 0 12px; font-size: 1em; transition: color 0.3s; }
        nav a:hover { color: #ffc107; }
        nav a.active { color: #ffc107; font-weight: bold; }
        
        .container { max-width: 1400px; margin: 40px auto; padding: 40px; }
        
        /* Header */
        .dashboard-header { text-align: center; margin-bottom: 50px; }
        .dashboard-header h1 { font-size: 3em; color: #667eea; margin-bottom: 10px; }
        .dashboard-header p { color: #b8c5d6; font-size: 1.2em; }
        
        /* Quick Stats */
        .quick-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 40px 0; }
        .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 15px; text-align: center; box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3); }
        .stat-card h3 { font-size: 1.2em; margin-bottom: 15px; opacity: 0.9; }
        .stat-card .number { font-size: 2.5em; font-weight: bold; margin-bottom: 10px; }
        .stat-card .label { font-size: 0.9em; opacity: 0.8; }
        
        /* Admin Sections */
        .admin-sections { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; margin: 50px 0; }
        .section-card { background: #1a1f3a; padding: 30px; border-radius: 20px; border-left: 5px solid #667eea; transition: transform 0.3s, box-shadow 0.3s; }
        .section-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4); }
        .section-card h2 { color: #667eea; font-size: 1.8em; margin-bottom: 20px; }
        .section-card p { color: #b8c5d6; line-height: 1.6; margin-bottom: 20px; }
        .section-card .actions { display: flex; flex-direction: column; gap: 10px; }
        .section-card a { display: block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 25px; border-radius: 10px; text-decoration: none; text-align: center; transition: transform 0.3s; }
        .section-card a:hover { transform: translateX(5px); }
        
        /* Status Indicator */
        .status-online { display: inline-block; width: 10px; height: 10px; background: #4caf50; border-radius: 50%; margin-right: 8px; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        
        /* Emergency Button */
        .emergency-btn { background: #ff5722; color: white; padding: 15px 40px; border-radius: 50px; font-size: 1.2em; font-weight: bold; border: none; cursor: pointer; margin: 20px auto; display: block; animation: glow 2s infinite; }
        @keyframes glow { 0%, 100% { box-shadow: 0 0 20px rgba(255, 87, 34, 0.5); } 50% { box-shadow: 0 0 40px rgba(255, 87, 34, 0.8); } }
        
        .info-box { background: #4caf50; color: #fff; padding: 20px; border-radius: 10px; margin: 30px 0; }
        .warning-box { background: #ff5722; color: #fff; padding: 20px; border-radius: 10px; margin: 30px 0; }
    </style>
    <script src="admin-header.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
</head>
<body>
    

    <div class="container">
        <div class="dashboard-header">
            <h1>üõ°Ô∏è AMS Admin Dashboard</h1>
            <p><span class="status-online"></span>System Status: Online</p>
        </div>

        <div class="quick-stats">
            <div class="stat-card">
                <h3>üìä Total Supply</h3>
                <div class="number" id="totalSupply">-</div>
                <div class="label">AMS Tokens</div>
            </div>
            <div class="stat-card">
                <h3>üî• Total Burned</h3>
                <div class="number" id="totalBurned">-</div>
                <div class="label">AMS Tokens</div>
            </div>
            <div class="stat-card">
                <h3>‚è≥ Queue Length</h3>
                <div class="number" id="queueLength">-</div>
                <div class="label">Pending Donations</div>
            </div>
            <div class="stat-card">
                <h3>üí∞ Your Balance</h3>
                <div class="number" id="ownerBalance">-</div>
                <div class="label">AMS Tokens</div>
            </div>
        </div>

        <button class="emergency-btn" onclick="pauseContract()">üö® EMERGENCY PAUSE</button>

        <div class="info-box">
            <strong>‚ÑπÔ∏è –î–æ–±—Ä–µ –¥–æ—à—ä–ª, Owner!</strong><br>
            –¢–æ–≤–∞ –µ —Ü–µ–Ω—Ç—Ä–∞–ª–Ω–∏—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ AMS Token. –í—Å–∏—á–∫–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∞ –¥–æ—Å—Ç—ä–ø–Ω–∏ –æ—Ç –º–µ–Ω—é—Ç–æ –≥–æ—Ä–µ.
        </div>

        <div class="admin-sections">
            <!-- Donation Management -->
            <div class="section-card" style="border-left-color: #4caf50;">
                <h2>üìã Donation Management</h2>
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ donation queue, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –¥–∞—Ä–µ–Ω–∏—è, –ø—Ä–µ–≥–ª–µ–¥ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—è</p>
                <div class="actions">
                    <a href="queue-management.html">üìã Donation Queue</a>
                </div>
            </div>

            <!-- Token Distribution -->
            <div class="section-card" style="border-left-color: #2196f3;">
                <h2>üí∏ Token Distribution</h2>
                <p>–ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ —Ç–æ–∫–µ–Ω–∏ –∫—ä–º –¥–∞—Ä–∏—Ç–µ–ª–∏ - –æ—Ç —Ä–µ–∑–µ—Ä–≤ –∏–ª–∏ mint –Ω–æ–≤–∏</p>
                <div class="actions">
                    <a href="bbb-send-tokens-to-donor.html">üí∏ –ò–∑–ø—Ä–∞—Ç–∏ –†–µ–∑–µ—Ä–≤–Ω–∏ (–ë–ë–ë)</a>
                    <a href="ggg-mint-and-send.html">‚ú® Mint & –ò–∑–ø—Ä–∞—Ç–∏ (–ì–ì–ì)</a>
                </div>
            </div>

            <!-- Liquidity Management -->
            <div class="section-card" style="border-left-color: #ffc107;">
                <h2>üí∞ Liquidity Management</h2>
                <p>Mint —Ç–æ–∫–µ–Ω–∏ –∑–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç –∏ –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ BNB –≤ PancakeSwap</p>
                <div class="actions">
                    <a href="vvv-mint-new-AMS.html">üî• Mint –∑–∞ –õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç (–í–í–í)</a>
                    <a href="aaa-add-liquidity.html">üí∞ –î–æ–±–∞–≤–∏ –õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç (–ê–ê–ê)</a>
                </div>
            </div>

            <!-- Burn Management -->
            <div class="section-card" style="border-left-color: #ff5722;">
                <h2>üî• Burn Management</h2>
                <p>Scheduled –∏ manual –∏–∑–≥–∞—Ä—è–Ω–µ –Ω–∞ —Ç–æ–∫–µ–Ω–∏, –ø—Ä–µ–≥–ª–µ–¥ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—è</p>
                <div class="actions">
                    <a href="burn-tokens.html">üî• Burn Tokens</a>
                </div>
            </div>

            <!-- History & Reports -->
            <div class="section-card" style="border-left-color: #9c27b0;">
                <h2>üìä History & Reports</h2>
                <p>–ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –≤—Å–∏—á–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, transfers, trading –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç</p>
                <div class="actions">
                    <a href="transfer-history.html">üìú Transfer History</a>
                    <a href="trading-history.html">üìä Trading History</a>
                </div>
            </div>

            <!-- Settings & Support -->
            <div class="section-card" style="border-left-color: #607d8b;">
                <h2>‚öôÔ∏è Settings & Support</h2>
                <p>–ö–æ–Ω—Ç–∞–∫—Ç–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –ø–æ–¥–¥—Ä—ä–∂–∫–∞</p>
                <div class="actions">
                    <a href="../public/contact.html">üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
                </div>
            </div>
        </div>

        <div class="warning-box">
            <strong>‚ö†Ô∏è –í–ê–ñ–ù–ò –ù–ê–ü–û–ú–ù–Ø–ù–ò–Ø:</strong><br>
            ‚Ä¢ Timeout –º–µ–∂–¥—É –∏–∑–ø—Ä–∞—â–∞–Ω–∏—è: 12 —á–∞—Å–∞ (–∏–ª–∏ 30 –º–∏–Ω –ø—Ä–∏ —É—Å–∫–æ—Ä–µ–Ω–∏–µ)<br>
            ‚Ä¢ Trading window: 11:00-12:00 AM (–±—ä–ª–≥–∞—Ä—Å–∫–æ –≤—Ä–µ–º–µ)<br>
            ‚Ä¢ Max transfer: 1000 AMS –Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è<br>
            ‚Ä¢ Scheduled burn: –ù–∞ –≤—Å–µ–∫–∏ 60 –¥–Ω–∏ (5% –æ—Ç supply)<br>
            ‚Ä¢ –í–∏–Ω–∞–≥–∏ –ø—Ä–æ–≤–µ—Ä—è–≤–∞–π wallet –∞–¥—Ä–µ—Å–∏—Ç–µ –ø—Ä–µ–¥–∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ!
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="wallet-helper.js"></script>
    <script>
        const CONTRACT_ADDRESS = 'YOUR_CONTRACT_ADDRESS_HERE';
        const CONTRACT_ABI = [
            {"inputs": [], "name": "totalSupply", "outputs": [{"type": "uint256"}], "stateMutability": "view", "type": "function"},
            {"inputs": [], "name": "totalBurned", "outputs": [{"type": "uint256"}], "stateMutability": "view", "type": "function"},
            {"inputs": [], "name": "getQueueLength", "outputs": [{"type": "uint256"}], "stateMutability": "view", "type": "function"},
            {"inputs": [{"name": "account", "type": "address"}], "name": "balanceOf", "outputs": [{"type": "uint256"}], "stateMutability": "view", "type": "function"},
            {"inputs": [], "name": "pause", "outputs": [], "stateMutability": "nonpayable", "type": "function"}
        ];

        let web3;
        let contract;
        let userAccount;

        async function init() {
            // Use wallet helper for better detection
            const connected = await window.walletHelper.init();
            
            if (connected) {
                try {
                    web3 = window.walletHelper.getWeb3();
                    userAccount = window.walletHelper.getAccount();
                    
                    contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
                    
                    await loadStats();
                    
                    // Auto refresh every 30 seconds
                    setInterval(loadStats, 30000);
                    
                } catch (error) {
                    console.error('Error:', error);
                    alert('‚ö†Ô∏è –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: ' + error.message);
                }
            }
        }

        async function loadStats() {
            try {
                // Total Supply
                const supply = await contract.methods.totalSupply().call();
                document.getElementById('totalSupply').textContent = 
                    (parseFloat(web3.utils.fromWei(supply, 'ether')) / 1000000).toFixed(2) + 'M';
                
                // Total Burned
                const burned = await contract.methods.totalBurned().call();
                document.getElementById('totalBurned').textContent = 
                    (parseFloat(web3.utils.fromWei(burned, 'ether')) / 1000000).toFixed(2) + 'M';
                
                // Queue Length
                const queueLen = await contract.methods.getQueueLength().call();
                document.getElementById('queueLength').textContent = queueLen;
                
                // Owner Balance
                const balance = await contract.methods.balanceOf(userAccount).call();
                document.getElementById('ownerBalance').textContent = 
                    (parseFloat(web3.utils.fromWei(balance, 'ether')) / 1000000).toFixed(2) + 'M';
                
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        async function pauseContract() {
            if (!confirm('üö® –í–ù–ò–ú–ê–ù–ò–ï!\n\n–©–µ –ü–ê–£–ó–ò–†–ê–® —Ü–µ–ª–∏—è contract!\n\n–í—Å–∏—á–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —â–µ –±—ä–¥–∞—Ç —Å–ø—Ä–µ–Ω–∏!\n\n–°–∏–≥—É—Ä–µ–Ω –ª–∏ —Å–∏?')) {
                return;
            }
            
            try {
                await contract.methods.pause().send({ from: userAccount });
                alert('‚úÖ Contract –µ –ø–∞—É–∑–∏—Ä–∞–Ω!');
            } catch (error) {
                alert('‚ùå –ì—Ä–µ—à–∫–∞: ' + error.message);
            }
        }

        window.addEventListener('load', init);
    </script>
</body>
</html>
