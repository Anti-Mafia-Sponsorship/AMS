<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –û–ø–∞—à–∫–∞</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: #0a0e27; color: #fff; }
        nav { background: #1a1f3a; padding: 20px; text-align: center; }
        nav a { color: #667eea; text-decoration: none; margin: 0 15px; font-size: 1.1em; }
        nav a:hover { color: #fff; }
        .container { max-width: 1400px; margin: 40px auto; padding: 40px; }
        h1 { font-size: 2.5em; color: #667eea; margin-bottom: 30px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0; }
        .stat-card { background: #1a1f3a; padding: 25px; border-radius: 15px; border-left: 4px solid #667eea; }
        .stat-card h3 { color: #667eea; font-size: 1.2em; margin-bottom: 10px; }
        .stat-card .number { font-size: 2.5em; font-weight: bold; color: #ffc107; }
        .filter-box { background: #1a1f3a; padding: 25px; border-radius: 15px; margin: 30px 0; }
        .filter-group { display: inline-block; margin: 10px 15px; }
        .filter-group label { color: #667eea; margin-right: 10px; }
        .filter-group input, .filter-group select { padding: 10px; border-radius: 8px; border: 2px solid #667eea; background: #0a0e27; color: #fff; }
        .btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 30px; border-radius: 25px; font-size: 1em; font-weight: bold; border: none; cursor: pointer; margin: 5px; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4); }
        .btn-success { background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%); }
        .btn-danger { background: linear-gradient(135deg, #ff5722 0%, #d32f2f 100%); }
        .btn-small { padding: 8px 20px; font-size: 0.9em; }
        table { width: 100%; background: #1a1f3a; border-radius: 15px; margin: 30px 0; border-collapse: collapse; overflow: hidden; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #667eea; }
        th { background: #667eea; color: #fff; font-weight: bold; position: sticky; top: 0; }
        td { color: #b8c5d6; }
        tr:hover { background: rgba(102, 126, 234, 0.1); }
        .status-pending { color: #ffc107; font-weight: bold; }
        .status-processed { color: #4caf50; font-weight: bold; }
        .wallet-addr { font-family: 'Courier New', monospace; font-size: 0.9em; }
        .info-box { background: #4caf50; color: #fff; padding: 20px; border-radius: 10px; margin: 20px 0; }
        .warning-box { background: #ff5722; color: #fff; padding: 20px; border-radius: 10px; margin: 20px 0; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="wallet-helper.js"></script>
</head>
<body>
<nav style="background: #1a1f3a; padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">
    <a href="index.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üìä Dashboard</a>
    <a href="queue-management.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üìã Queue</a>
    <a href="bbb-send-tokens-to-donor.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üí∏ –ò–∑–ø—Ä–∞—Ç–∏</a>
    <a href="ggg-mint-and-send.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">‚ú® Mint&Send</a>
    <a href="vvv-mint-new-AMS.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üî• Mint</a>
    <a href="aaa-add-liquidity.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üí∞ –õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç</a>
    <a href="burn-tokens.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üî• Burn</a>
    <a href="transfer-history.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üìú Transfers</a>
    <a href="trading-history.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üìä Trading</a>
    <a href="../public/contact.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
</nav>
<script>
(function(){const c=window.location.pathname.split("/").pop();document.querySelectorAll("nav a").forEach(l=>{if(l.getAttribute("href")===c){l.style.color="#ffc107";l.style.fontWeight="bold";}l.addEventListener("mouseenter",function(){if(this.style.color!=="rgb(255, 193, 7)")this.style.color="#fff";});l.addEventListener("mouseleave",function(){if(this.getAttribute("href")!==c)this.style.color="#667eea";});});})();
</script>

    <div class="container">
        <h1>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ Donation Queue</h1>
        
        <div class="stats-grid">
            <div class="stat-card">
                <h3>‚è≥ Pending Donations</h3>
                <div class="number" id="pendingCount">0</div>
            </div>
            <div class="stat-card">
                <h3>‚úÖ Processed Today</h3>
                <div class="number" id="processedToday">0</div>
            </div>
            <div class="stat-card">
                <h3>üí∞ Total BNB Pending</h3>
                <div class="number" id="totalBnbPending">0</div>
            </div>
            <div class="stat-card">
                <h3>‚è±Ô∏è Current Timeout</h3>
                <div class="number" id="currentTimeout">12—á</div>
            </div>
        </div>

        <div class="info-box">
            <strong>‚ÑπÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞—Ç–∞:</strong><br>
            ‚Ä¢ Donations —Å–µ –æ–±—Ä–∞–±–æ—Ç–≤–∞—Ç –ø–æ —Ä–µ–¥–∞ –Ω–∞ –ø–æ—Å—Ç—ä–ø–≤–∞–Ω–µ (FIFO - First In First Out)<br>
            ‚Ä¢ Timeout –º–µ–∂–¥—É –∏–∑–ø—Ä–∞—â–∞–Ω–∏—è: 12 —á–∞—Å–∞ (–∏–ª–∏ 30 –º–∏–Ω—É—Ç–∏ –ø—Ä–∏ –ø–æ–≤–µ—á–µ –æ—Ç 1000 –≤ –æ–ø–∞—à–∫–∞—Ç–∞)<br>
            ‚Ä¢ –ú–∞–∫—Å–∏–º—É–º 1000 AMS –Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è<br>
            ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–µ –∏–∑–ø—Ä–∞—â–∞—Ç —Ç–æ–∫–µ–Ω–∏ –æ—Ç owner —Ä–µ–∑–µ—Ä–≤–∞
        </div>

        <div class="filter-box">
            <h3 style="color: #667eea; margin-bottom: 15px;">üîç –§–∏–ª—Ç—Ä–∏</h3>
            <div class="filter-group">
                <label>–°—Ç–∞—Ç—É—Å:</label>
                <select id="filterStatus">
                    <option value="all">–í—Å–∏—á–∫–∏</option>
                    <option value="pending" selected>Pending</option>
                    <option value="processed">Processed</option>
                </select>
            </div>
            <div class="filter-group">
                <label>–û—Ç –¥–∞—Ç–∞:</label>
                <input type="date" id="filterDateFrom">
            </div>
            <div class="filter-group">
                <label>–î–æ –¥–∞—Ç–∞:</label>
                <input type="date" id="filterDateTo">
            </div>
            <div class="filter-group">
                <label>–ú–∏–Ω–∏–º—É–º BNB:</label>
                <input type="number" id="filterMinBnb" placeholder="0.001" step="0.001">
            </div>
            <button class="btn" onclick="applyFilters()">–ü—Ä–∏–ª–æ–∂–∏ –§–∏–ª—Ç—Ä–∏</button>
            <button class="btn" onclick="resetFilters()">–ò–∑—á–∏—Å—Ç–∏</button>
        </div>

        <div style="margin: 30px 0;">
            <button class="btn btn-success" onclick="processNext()">‚ö° –û–±—Ä–∞–±–æ—Ç–∏ –°–ª–µ–¥–≤–∞—â–æ Donation</button>
            <button class="btn" onclick="loadQueue()">üîÑ –û–±–Ω–æ–≤–∏ –î–∞–Ω–Ω–∏—Ç–µ</button>
            <button class="btn btn-danger" onclick="processAll()" id="processAllBtn" disabled>‚ö°‚ö° –û–±—Ä–∞–±–æ—Ç–∏ –í—Å–∏—á–∫–∏ (–û–ø–∞—Å–Ω–æ!)</button>
        </div>

        <div id="statusMessage" style="padding: 20px; border-radius: 10px; margin: 20px 0; display: none;"></div>

        <h2 style="color: #667eea; margin-top: 40px;">üìä Donation Queue</h2>
        
        <div style="overflow-x: auto;">
            <table id="queueTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>–ò–º–µ</th>
                        <th>Email</th>
                        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                        <th>Wallet –ê–¥—Ä–µ—Å</th>
                        <th>BNB –°—É–º–∞</th>
                        <th>–¢–æ–∫–µ–Ω–∏ –∑–∞ –ø–æ–ª—É—á–∞–≤–∞–Ω–µ</th>
                        <th>–î–∞—Ç–∞/–ß–∞—Å</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody id="queueTableBody">
                    <tr>
                        <td colspan="10" style="text-align: center; padding: 40px;">
                            <em>–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏...</em>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="warning-box" style="margin-top: 40px;">
            <strong>‚ö†Ô∏è –í–ê–ñ–ù–û:</strong><br>
            ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–≤–∞–π –≤–Ω–∏–º–∞—Ç–µ–ª–Ω–æ wallet –∞–¥—Ä–µ—Å–∏—Ç–µ –ø—Ä–µ–¥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞!<br>
            ‚Ä¢ –°–ª–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ç–∞ –ù–ï –º–æ–∂–µ –¥–∞ —Å–µ –æ—Ç–º–µ–Ω–∏!<br>
            ‚Ä¢ –ü—Ä–∏ —Å—ä–º–Ω–µ–Ω–∏–µ - –ø—Ä–æ–≤–µ—Ä–∏ –≤ BSCScan –¥–∞–ª–∏ –¥–∞—Ä–µ–Ω–∏–µ—Ç–æ –µ —Ä–µ–∞–ª–Ω–æ!<br>
            ‚Ä¢ –ê–∫–æ –¥–æ–Ω–æ—Ä—ä—Ç –ù–ï –µ –¥–∞–ª –∫–æ–Ω—Ç–∞–∫—Ç–∏ - –∑–∞–ø–∞–∑–∏ –∑–∞–ø–∏—Å–∞ –∑–∞ —Å–ø—Ä–∞–≤–∫–∞!
        </div>
    </div>

    <script>
        const CONTRACT_ADDRESS = 'YOUR_CONTRACT_ADDRESS_HERE';
        const CONTRACT_ABI = [
            {
                "inputs": [],
                "name": "getQueueLength",
                "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [{"internalType": "uint256", "name": "", "type": "uint256"}],
                "name": "donationQueue",
                "outputs": [
                    {"internalType": "address", "name": "donor", "type": "address"},
                    {"internalType": "uint256", "name": "bnbAmount", "type": "uint256"},
                    {"internalType": "uint256", "name": "tokensToReceive", "type": "uint256"},
                    {"internalType": "uint256", "name": "timestamp", "type": "uint256"},
                    {"internalType": "bool", "name": "processed", "type": "bool"}
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "CPanelProcessDonationQueue",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "calculateTimeout",
                "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}],
                "stateMutability": "view",
                "type": "function"
            }
        ];

        let web3;
        let contract;
        let userAccount;
        let allDonations = [];

        async function init() {
            if (typeof window.ethereum !== 'undefined') {
                try {
                    await window.ethereum.request({ method: 'eth_requestAccounts' });
                    web3 = new Web3(window.ethereum);
                    const accounts = await web3.eth.getAccounts();
                    userAccount = accounts[0];
                    
                    contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
                    
                    await loadQueue();
                    
                    // Auto refresh every 30 seconds
                    setInterval(loadQueue, 30000);
                    
                } catch (error) {
                    showStatus('‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ: ' + error.message, 'error');
                }
            } else {
                showStatus('‚ùå –ú–æ–ª—è, –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–π MetaMask!', 'error');
            }
        }

        async function loadQueue() {
            try {
                showStatus('üîÑ –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏...', 'info');
                
                // Get queue length
                const queueLength = await contract.methods.getQueueLength().call();
                
                // Get timeout
                const timeout = await contract.methods.calculateTimeout().call();
                const timeoutHours = parseInt(timeout) / 3600;
                document.getElementById('currentTimeout').textContent = 
                    timeoutHours === 12 ? '12—á' : '30–º–∏–Ω';
                
                // Load all donations
                allDonations = [];
                let pendingCount = 0;
                let processedToday = 0;
                let totalBnbPending = 0;
                const todayStart = new Date().setHours(0, 0, 0, 0);
                
                for (let i = 0; i < queueLength; i++) {
                    const donation = await contract.methods.donationQueue(i).call();
                    
                    // Fetch donor details from backend/localStorage
                    const donorDetails = await getDonorDetails(donation.donor);
                    
                    const donationData = {
                        index: i,
                        donor: donation.donor,
                        bnbAmount: web3.utils.fromWei(donation.bnbAmount, 'ether'),
                        tokensToReceive: web3.utils.fromWei(donation.tokensToReceive, 'ether'),
                        timestamp: parseInt(donation.timestamp) * 1000,
                        processed: donation.processed,
                        name: donorDetails.name || '–ê–Ω–æ–Ω–∏–º–µ–Ω',
                        email: donorDetails.email || '–ù–µ –µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ–Ω',
                        phone: donorDetails.phone || '–ù–µ –µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ–Ω'
                    };
                    
                    allDonations.push(donationData);
                    
                    if (!donation.processed) {
                        pendingCount++;
                        totalBnbPending += parseFloat(donationData.bnbAmount);
                    } else if (donationData.timestamp >= todayStart) {
                        processedToday++;
                    }
                }
                
                // Update stats
                document.getElementById('pendingCount').textContent = pendingCount;
                document.getElementById('processedToday').textContent = processedToday;
                document.getElementById('totalBnbPending').textContent = totalBnbPending.toFixed(4);
                
                // Enable/disable process all button
                document.getElementById('processAllBtn').disabled = pendingCount === 0;
                
                // Display table
                displayQueue(allDonations);
                
                showStatus('‚úÖ –î–∞–Ω–Ω–∏—Ç–µ —Å–∞ –æ–±–Ω–æ–≤–µ–Ω–∏', 'success');
                setTimeout(() => {
                    document.getElementById('statusMessage').style.display = 'none';
                }, 3000);
                
            } catch (error) {
                showStatus('‚ùå –ì—Ä–µ—à–∫–∞: ' + error.message, 'error');
            }
        }

        async function getDonorDetails(walletAddress) {
            // TODO: Fetch from backend database
            // For now, return from localStorage or empty
            const stored = localStorage.getItem('donor_' + walletAddress);
            if (stored) {
                return JSON.parse(stored);
            }
            return { name: null, email: null, phone: null };
        }

        function displayQueue(donations) {
            const tbody = document.getElementById('queueTableBody');
            tbody.innerHTML = '';
            
            if (donations.length === 0) {
                tbody.innerHTML = '<tr><td colspan="10" style="text-align: center; padding: 40px;"><em>–ù—è–º–∞ donations –≤ –æ–ø–∞—à–∫–∞—Ç–∞</em></td></tr>';
                return;
            }
            
            donations.forEach((donation, index) => {
                const row = document.createElement('tr');
                row.style.background = donation.processed ? 'rgba(76, 175, 80, 0.1)' : 'transparent';
                
                const date = new Date(donation.timestamp);
                const formattedDate = date.toLocaleString('bg-BG');
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${donation.name}</td>
                    <td>${donation.email}</td>
                    <td>${donation.phone}</td>
                    <td class="wallet-addr">${donation.donor.substring(0, 6)}...${donation.donor.substring(38)}</td>
                    <td>${parseFloat(donation.bnbAmount).toFixed(4)} BNB</td>
                    <td>${parseFloat(donation.tokensToReceive).toFixed(2)} AMS</td>
                    <td>${formattedDate}</td>
                    <td class="${donation.processed ? 'status-processed' : 'status-pending'}">
                        ${donation.processed ? '‚úÖ Processed' : '‚è≥ Pending'}
                    </td>
                    <td>
                        ${!donation.processed ? 
                            `<button class="btn btn-success btn-small" onclick="processDonation(${donation.index})">–û–±—Ä–∞–±–æ—Ç–∏</button>` :
                            `<span style="color: #4caf50;">‚úì –ì–æ—Ç–æ–≤–æ</span>`
                        }
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        async function processNext() {
            if (!confirm('–°–∏–≥—É—Ä–µ–Ω –ª–∏ —Å–∏, —á–µ –∏—Å–∫–∞—à –¥–∞ –æ–±—Ä–∞–±–æ—Ç–∏—à –°–õ–ï–î–í–ê–©–û–¢–û donation –≤ –æ–ø–∞—à–∫–∞—Ç–∞?')) {
                return;
            }
            
            try {
                showStatus('üîÑ –û–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ...', 'info');
                
                const tx = await contract.methods.CPanelProcessDonationQueue().send({
                    from: userAccount,
                    gas: 300000
                });
                
                showStatus(`‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–µ–Ω–æ!<br>TX: ${tx.transactionHash}`, 'success');
                
                // Reload queue after 3 seconds
                setTimeout(loadQueue, 3000);
                
            } catch (error) {
                showStatus('‚ùå –ì—Ä–µ—à–∫–∞: ' + error.message, 'error');
            }
        }

        async function processDonation(index) {
            if (!confirm(`–°–∏–≥—É—Ä–µ–Ω –ª–∏ —Å–∏, —á–µ –∏—Å–∫–∞—à –¥–∞ –æ–±—Ä–∞–±–æ—Ç–∏—à donation #${index + 1}?`)) {
                return;
            }
            
            // Note: Contract processes FIFO, so you can't process specific index
            // This button just calls processNext()
            await processNext();
        }

        async function processAll() {
            const pendingCount = allDonations.filter(d => !d.processed).length;
            
            if (!confirm(
                `‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!\n\n` +
                `–©–µ –æ–±—Ä–∞–±–æ—Ç–∏—à ${pendingCount} donations –Ω–∞–≤–µ–¥–Ω—ä–∂!\n\n` +
                `–¢–æ–≤–∞ –º–æ–∂–µ –¥–∞ –æ—Ç–Ω–µ–º–µ –ú–ù–û–ì–û –≤—Ä–µ–º–µ –∏ GAS!\n\n` +
                `–°–∏–≥—É—Ä–µ–Ω –ª–∏ —Å–∏?`
            )) {
                return;
            }
            
            showStatus(`üîÑ –û–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ ${pendingCount} donations...`, 'info');
            
            let processed = 0;
            let failed = 0;
            
            for (let i = 0; i < pendingCount; i++) {
                try {
                    await contract.methods.CPanelProcessDonationQueue().send({
                        from: userAccount,
                        gas: 300000
                    });
                    processed++;
                    showStatus(`üîÑ –û–±—Ä–∞–±–æ—Ç–µ–Ω–∏: ${processed}/${pendingCount}`, 'info');
                } catch (error) {
                    failed++;
                    console.error('Failed:', error);
                }
            }
            
            showStatus(`‚úÖ –ì–æ—Ç–æ–≤–æ! –û–±—Ä–∞–±–æ—Ç–µ–Ω–∏: ${processed}, –ù–µ—É—Å–ø–µ—à–Ω–∏: ${failed}`, 'success');
            setTimeout(loadQueue, 3000);
        }

        function applyFilters() {
            const status = document.getElementById('filterStatus').value;
            const dateFrom = document.getElementById('filterDateFrom').value;
            const dateTo = document.getElementById('filterDateTo').value;
            const minBnb = parseFloat(document.getElementById('filterMinBnb').value) || 0;
            
            let filtered = allDonations.filter(d => {
                // Status filter
                if (status === 'pending' && d.processed) return false;
                if (status === 'processed' && !d.processed) return false;
                
                // Date filter
                if (dateFrom) {
                    const from = new Date(dateFrom).getTime();
                    if (d.timestamp < from) return false;
                }
                if (dateTo) {
                    const to = new Date(dateTo).getTime() + 86400000; // +1 day
                    if (d.timestamp > to) return false;
                }
                
                // Min BNB filter
                if (parseFloat(d.bnbAmount) < minBnb) return false;
                
                return true;
            });
            
            displayQueue(filtered);
            showStatus(`‚úÖ –§–∏–ª—Ç—Ä–∏—Ä–∞–Ω–∏: ${filtered.length} –æ—Ç ${allDonations.length}`, 'success');
        }

        function resetFilters() {
            document.getElementById('filterStatus').value = 'pending';
            document.getElementById('filterDateFrom').value = '';
            document.getElementById('filterDateTo').value = '';
            document.getElementById('filterMinBnb').value = '';
            displayQueue(allDonations);
            showStatus('‚úÖ –§–∏–ª—Ç—Ä–∏—Ç–µ —Å–∞ –∏–∑—á–∏—Å—Ç–µ–Ω–∏', 'success');
        }

        function showStatus(message, type) {
            const status = document.getElementById('statusMessage');
            status.innerHTML = message;
            status.style.display = 'block';
            
            if (type === 'success') {
                status.style.background = '#4caf50';
            } else if (type === 'error') {
                status.style.background = '#ff5722';
            } else {
                status.style.background = '#ffc107';
                status.style.color = '#000';
            }
        }

        // Init on load
        window.addEventListener('load', init);
    </script>
</body>
</html>
