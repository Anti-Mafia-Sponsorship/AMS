<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Owner Panel - Mint –∏ –ò–∑–ø—Ä–∞—Ç–∏</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: #0a0e27; color: #fff; }
        nav { background: #1a1f3a; padding: 20px; text-align: center; }
        nav a { color: #667eea; text-decoration: none; margin: 0 15px; font-size: 1.1em; }
        nav a:hover { color: #fff; }
        .container { max-width: 900px; margin: 60px auto; padding: 40px; }
        h1 { font-size: 2.5em; color: #764ba2; text-align: center; margin-bottom: 20px; }
        .subtitle { text-align: center; color: #b8c5d6; font-size: 1.2em; margin-bottom: 50px; }
        .panel-box { background: #1a1f3a; padding: 40px; border-radius: 20px; margin: 30px 0; border: 3px solid #764ba2; }
        .panel-box h2 { color: #667eea; font-size: 2em; margin-bottom: 20px; }
        .panel-box p { color: #b8c5d6; line-height: 1.8; margin-bottom: 15px; }
        .form-group { margin: 25px 0; }
        .form-group label { display: block; color: #667eea; font-size: 1.2em; margin-bottom: 10px; font-weight: bold; }
        .form-group input { width: 100%; padding: 15px; border-radius: 10px; border: 2px solid #667eea; background: #0a0e27; color: #fff; font-size: 1.1em; }
        .btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px 50px; border-radius: 50px; font-size: 1.3em; font-weight: bold; border: none; cursor: pointer; transition: transform 0.3s; width: 100%; margin-top: 20px; }
        .btn:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(118, 75, 162, 0.4); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .info-box { background: #4caf50; color: #fff; padding: 30px; border-radius: 15px; margin: 30px 0; }
        .warning-box { background: #ff5722; color: #fff; padding: 30px; border-radius: 15px; margin: 30px 0; }
        .status { padding: 20px; border-radius: 10px; margin-top: 20px; display: none; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="wallet-helper.js"></script>
</head>
<body>
<nav style="background: #1a1f3a; padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">
    <a href="index.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üìä Dashboard</a>
    <a href="queue-management.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üìã Queue</a>
    <a href="bbb-send-tokens-to-donor.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üí∏ –ò–∑–ø—Ä–∞—Ç–∏</a>
    <a href="ggg-mint-and-send.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">‚ú® Mint&Send</a>
    <a href="vvv-mint-new-AMS.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üî• Mint</a>
    <a href="aaa-add-liquidity.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üí∞ –õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç</a>
    <a href="burn-tokens.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üî• Burn</a>
    <a href="transfer-history.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üìú Transfers</a>
    <a href="trading-history.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üìä Trading</a>
    <a href="../public/contact.html" style="color: #667eea; text-decoration: none; margin: 0 10px; font-size: 1em;">üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
</nav>
<script>
(function(){const c=window.location.pathname.split("/").pop();document.querySelectorAll("nav a").forEach(l=>{if(l.getAttribute("href")===c){l.style.color="#ffc107";l.style.fontWeight="bold";}l.addEventListener("mouseenter",function(){if(this.style.color!=="rgb(255, 193, 7)")this.style.color="#fff";});l.addEventListener("mouseleave",function(){if(this.getAttribute("href")!==c)this.style.color="#667eea";});});})();
</script>

    <div class="container">
        <h1>‚ú® –ì–ì–ì: Mint –∏ –ò–∑–ø—Ä–∞—Ç–∏ –Ω–∞ –î–∞—Ä–∏—Ç–µ–ª</h1>
        <p class="subtitle">–°—ä–∑–¥–∞–π –ù–û–í–ò —Ç–æ–∫–µ–Ω–∏ –∏ –≥–∏ –∏–∑–ø—Ä–∞—Ç–∏ –¥–∏—Ä–µ–∫—Ç–Ω–æ ‚Üí –ë–ï–ó –¥–æ–±–∞–≤—è–Ω–µ –≤ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç</p>
        
        <div class="info-box">
            <h3>üìã –ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏ —Ç–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è?</h3>
            <p style="font-size: 1.2em; line-height: 1.8;">
                <strong>–°—ä–∑–¥–∞–≤–∞ –ù–û–í–ò —Ç–æ–∫–µ–Ω–∏ –∏ –≥–∏ –∏–∑–ø—Ä–∞—â–∞ –î–ò–†–ï–ö–¢–ù–û –Ω–∞ –¥–∞—Ä–∏—Ç–µ–ª</strong><br><br>
                
                ‚úÖ Mint-–≤–∞ –Ω–æ–≤–∏ —Ç–æ–∫–µ–Ω–∏ (supply —Ä–∞—Å—Ç–µ)<br>
                ‚úÖ –ò–∑–ø—Ä–∞—â–∞ –≥–∏ –¥–∏—Ä–µ–∫—Ç–Ω–æ –Ω–∞ –¥–∞—Ä–∏—Ç–µ–ª<br>
                ‚úÖ –ë–ï–ó –¥–æ–±–∞–≤—è–Ω–µ –≤ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç<br>
                ‚úÖ –°–ø–∞–∑–≤–∞ —Å—ä—â–∏—Ç–µ timeout –ø—Ä–∞–≤–∏–ª–∞ (12—á/30–º–∏–Ω)<br><br>
                
                <strong>–†–∞–∑–ª–∏–∫–∞ –æ—Ç –í–í–í:</strong><br>
                ‚Ä¢ –í–í–í: Mint ‚Üí –¢–æ–∫–µ–Ω–∏—Ç–µ –æ—Ç–∏–≤–∞—Ç –ø—Ä–∏ —Ç–µ–± ‚Üí –¢—Ä—è–±–≤–∞ –¥–∞ –≥–∏ –∏–∑–ø—Ä–∞—Ç–∏—à –æ—Ç–¥–µ–ª–Ω–æ<br>
                ‚Ä¢ –ì–ì–ì: Mint ‚Üí –¢–æ–∫–µ–Ω–∏—Ç–µ –æ—Ç–∏–≤–∞—Ç –î–ò–†–ï–ö–¢–ù–û –ø—Ä–∏ –¥–∞—Ä–∏—Ç–µ–ª—è<br><br>
                
                <strong>–ò–∑–ø–æ–ª–∑–≤–∞–π –∑–∞:</strong> –ë—ä—Ä–∑–æ –Ω–∞–≥—Ä–∞–∂–¥–∞–≤–∞–Ω–µ –Ω–∞ –¥–∞—Ä–∏—Ç–µ–ª–∏ –∫–æ–≥–∞—Ç–æ –Ω—è–º–∞—à —Ä–µ–∑–µ—Ä–≤–Ω–∏ —Ç–æ–∫–µ–Ω–∏
            </p>
        </div>
        
        <div class="panel-box">
            <h2>üîß Mint –∏ –ò–∑–ø—Ä–∞—Ç–∏</h2>
            
            <div class="form-group">
                <label>–ê–¥—Ä–µ—Å –Ω–∞ –¥–∞—Ä–∏—Ç–µ–ª:</label>
                <input type="text" id="recipientAddress" placeholder="0x...">
            </div>
            
            <div class="form-group">
                <label>–ö–æ–ª–∫–æ –ù–û–í–ò AMS —Ç–æ–∫–µ–Ω–∏? (Max 1000)</label>
                <input type="number" id="tokenAmount" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1000" step="1" max="1000" min="1">
            </div>
            
            <button class="btn" id="mintBtn" onclick="mintAndSend()">‚ú® Mint –∏ –ò–∑–ø—Ä–∞—Ç–∏</button>
            
            <div id="status" class="status"></div>
        </div>
        
        <div class="warning-box">
            <h3>‚ö†Ô∏è –í–ê–ñ–ù–û: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</h3>
            <p style="font-size: 1.1em; line-height: 1.8;">
                üîí <strong>–ú–∞–∫—Å–∏–º—É–º 1000 AMS –Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è</strong><br>
                üîí <strong>Timeout: 12 —á–∞—Å–∞ –º–µ–∂–¥—É mint-–æ–≤–µ</strong> (–Ω–∞–º–∞–ª—è–≤–∞ –¥–æ 30 –º–∏–Ω)<br>
                üîí Supply –†–ê–°–¢–ï (—Å—ä–∑–¥–∞–≤–∞—Ç —Å–µ –Ω–æ–≤–∏ —Ç–æ–∫–µ–Ω–∏)<br>
                üîí –¶–µ–Ω–∞—Ç–∞ –º–æ–∂–µ –õ–ï–ö–û –¥–∞ –ø–∞–¥–Ω–µ<br>
                üîí –°–∞–º–æ Owner –º–æ–∂–µ –¥–∞ –∏–∑–≤–∏–∫–∞ —Ç–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è
            </p>
        </div>
        
        <div class="info-box" style="margin-top: 40px;">
            <h3>üéØ –ö–æ–≥–∞ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—à –ì–ì–ì?</h3>
            <p style="font-size: 1.1em; line-height: 1.8;">
                <strong>–ü—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ:</strong><br><br>
                
                ‚úÖ –°–≤—ä—Ä—à–∏–ª–∏ —Å–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω–∏ (30M –∏–∑—á–µ—Ä–ø–∞–Ω–∏)<br>
                ‚úÖ –¢—Ä—è–±–≤–∞ –ë–™–†–ó–û –¥–∞ –Ω–∞–≥—Ä–∞–¥–∏—à –¥–∞—Ä–∏—Ç–µ–ª<br>
                ‚úÖ –ù–µ –∏—Å–∫–∞—à –¥–∞ —á–∞–∫–∞—à 2 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (mint + transfer)<br>
                ‚úÖ –ú–∞–ª–∫–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (–¥–æ 1000 AMS)<br><br>
                
                <strong>–ù–ï –ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ:</strong><br>
                ‚ùå –ó–∞ –≥–æ–ª–µ–º–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (–∏–∑–ø–æ–ª–∑–≤–∞–π –í–í–í + –ê–ê–ê)<br>
                ‚ùå –ê–∫–æ –∏–º–∞—à —Ä–µ–∑–µ—Ä–≤–Ω–∏ —Ç–æ–∫–µ–Ω–∏ (–∏–∑–ø–æ–ª–∑–≤–∞–π –ë–ë–ë)<br>
                ‚ùå –ê–∫–æ —Ü–µ–Ω–∞—Ç–∞ –µ –Ω–∏—Å–∫–∞
            </p>
        </div>
    </div>

    <script>
        const CONTRACT_ADDRESS = 'YOUR_CONTRACT_ADDRESS_HERE'; // –ó–ê–ú–ï–ù–ò –° –†–ï–ê–õ–ù–ò–Ø –ê–î–†–ï–°!
        
        const CONTRACT_ABI = [
            {
                "inputs": [{"internalType": "address", "name": "donor", "type": "address"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}],
                "name": "CPanelMintAndSendToDonor",
                "outputs": [{"internalType": "bool", "name": "", "type": "bool"}],
                "stateMutability": "nonpayable",
                "type": "function"
            }
        ];
        
        let web3;
        let contract;
        let userAccount;
        
        async function init() {
            if (typeof window.ethereum !== 'undefined') {
                try {
                    await window.ethereum.request({ method: 'eth_requestAccounts' });
                    web3 = new Web3(window.ethereum);
                    const accounts = await web3.eth.getAccounts();
                    userAccount = accounts[0];
                    
                    contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
                    
                } catch (error) {
                    showStatus('‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ —Å MetaMask: ' + error.message, 'error');
                }
            } else {
                showStatus('‚ùå –ú–æ–ª—è, –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–π MetaMask!', 'error');
            }
        }
        
        async function mintAndSend() {
            const recipient = document.getElementById('recipientAddress').value.trim();
            const amount = parseFloat(document.getElementById('tokenAmount').value);
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (!recipient || !recipient.startsWith('0x') || recipient.length !== 42) {
                showStatus('‚ùå –ù–µ–≤–∞–ª–∏–¥–µ–Ω –∞–¥—Ä–µ—Å! –¢—Ä—è–±–≤–∞ –¥–∞ –∑–∞–ø–æ—á–≤–∞ —Å 0x –∏ –¥–∞ –µ 42 —Å–∏–º–≤–æ–ª–∞.', 'error');
                return;
            }
            
            if (!amount || amount < 1 || amount > 1000) {
                showStatus('‚ùå –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –º–µ–∂–¥—É 1 –∏ 1000 AMS!', 'error');
                return;
            }
            
            // –ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ
            const confirmed = confirm(
                `‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!\n\n` +
                `–©–µ —Å—ä–∑–¥–∞–¥–µ—à ${amount} –ù–û–í–ò AMS —Ç–æ–∫–µ–Ω–∏ –∏ —â–µ –≥–∏ –∏–∑–ø—Ä–∞—Ç–∏—à –Ω–∞:\n${recipient}\n\n` +
                `Supply —â–µ –ù–ê–†–ê–°–ù–ï —Å ${amount} —Ç–æ–∫–µ–Ω–∞.\n\n` +
                `–°–∏–≥—É—Ä–µ–Ω –ª–∏ —Å–∏?`
            );
            
            if (!confirmed) {
                showStatus('‚ùå –û—Ç–∫–∞–∑–∞–Ω–æ –æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª', 'error');
                return;
            }
            
            try {
                showStatus('üîÑ Mint-–≤–∞–Ω–µ –∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ...', 'info');
                document.getElementById('mintBtn').disabled = true;
                
                const amountWei = web3.utils.toWei(amount.toString(), 'ether');
                
                const tx = await contract.methods.CPanelMintAndSendToDonor(recipient, amountWei).send({
                    from: userAccount,
                    gas: 250000
                });
                
                showStatus(`‚úÖ –£—Å–ø–µ—à–Ω–æ —Å—ä–∑–¥–∞–¥–µ–Ω–∏ –∏ –∏–∑–ø—Ä–∞—Ç–µ–Ω–∏ ${amount} AMS –∫—ä–º ${recipient.substring(0, 6)}...${recipient.substring(38)}<br>–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è: ${tx.transactionHash}`, 'success');
                
            } catch (error) {
                showStatus('‚ùå –ì—Ä–µ—à–∫–∞: ' + error.message, 'error');
            } finally {
                document.getElementById('mintBtn').disabled = false;
            }
        }
        
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.innerHTML = message;
            status.style.display = 'block';
            
            if (type === 'success') {
                status.style.background = '#4caf50';
            } else if (type === 'error') {
                status.style.background = '#ff5722';
            } else {
                status.style.background = '#ffc107';
                status.style.color = '#000';
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–π –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ
        window.addEventListener('load', init);
    </script>
</body>
</html>
