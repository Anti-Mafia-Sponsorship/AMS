<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMS Token - –î–∞—Ä—è–≤–∞–π –°–µ–≥–∞</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: #0a0e27; color: #fff; }
        nav { background: #1a1f3a; padding: 20px; text-align: center; }
        nav a { color: #667eea; text-decoration: none; margin: 0 15px; font-size: 1.1em; }
        nav a:hover { color: #fff; }
        .container { max-width: 1000px; margin: 60px auto; padding: 40px; }
        h1 { font-size: 3em; color: #667eea; text-align: center; margin-bottom: 50px; }
        .donate-box { background: #1a1f3a; padding: 40px; border-radius: 20px; margin: 30px 0; }
        .donate-box h2 { color: #ffc107; font-size: 2em; margin-bottom: 20px; }
        .donate-box p { color: #b8c5d6; line-height: 1.8; margin-bottom: 15px; }
        .form-group { margin: 20px 0; }
        .form-group label { display: block; color: #667eea; font-size: 1.2em; margin-bottom: 10px; }
        .form-group input, .form-group textarea { width: 100%; padding: 15px; border-radius: 10px; border: 2px solid #667eea; background: #0a0e27; color: #fff; font-size: 1.1em; transition: border-color 0.3s; }
        .form-group input:focus, .form-group textarea:focus { border-color: #ffc107; outline: none; }
        .form-group input.valid { border-color: #4caf50 !important; }
        .form-group input.invalid { border-color: #ff5722 !important; }
        .form-group small { color: #b8c5d6; font-size: 0.9em; margin-top: 5px; display: block; }
        .optional-tag { color: #ffc107; font-size: 0.9em; font-weight: normal; }
        .btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px 50px; border-radius: 50px; font-size: 1.3em; font-weight: bold; border: none; cursor: pointer; transition: transform 0.3s; width: 100%; margin: 10px 0; }
        .btn:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .btn-secondary { background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%); }
        .btn-connect { background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%); padding: 15px 40px; font-size: 1.1em; }
        .info-box { background: #4caf50; color: #fff; padding: 30px; border-radius: 15px; margin: 30px 0; }
        .warning-box { background: #ff5722; color: #fff; padding: 30px; border-radius: 15px; margin: 30px 0; }
        .danger-box { background: #f44336; color: #fff; padding: 30px; border-radius: 15px; margin: 30px 0; border: 3px solid #fff; }
        .checkbox-group { display: flex; align-items: flex-start; margin: 25px 0; }
        .checkbox-group input[type="checkbox"] { width: 25px; height: 25px; margin-right: 15px; margin-top: 3px; flex-shrink: 0; }
        .checkbox-group label { font-size: 1em; color: #b8c5d6; line-height: 1.6; }
        .anonymous-section { text-align: center; margin: 30px 0; padding: 30px; background: rgba(255, 152, 0, 0.1); border-radius: 15px; border: 2px dashed #ff9800; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
</head>
<body>
    <nav>
        <a href="index.html">–ù–∞—á–∞–ª–æ</a>
        <a href="connect.html">–°–≤—ä—Ä–∂–∏ Wallet</a>
        <a href="rules.html">–ü—Ä–∞–≤–∏–ª–∞</a>
        <a href="donate.html">–î–∞—Ä—è–≤–∞–π</a>
        <a href="contact.html">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
    </nav>

    <div class="container">
        <h1>üí∞ –î–∞—Ä—è–≤–∞–π –°–µ–≥–∞</h1>
        
        <div class="danger-box">
            <h3 style="margin-bottom: 15px;">‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–ù–û!</h3>
            <p><strong>–î–∞—Ä–∏ –°–ê–ú–û –∞–∫–æ:</strong></p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>‚úÖ –†–∞–∑–±–∏—Ä–∞—à –ø—Ä–∞–≤–∏–ª–∞—Ç–∞ –∑–∞ unlock –ø–µ—Ä–∏–æ–¥–∏—Ç–µ</li>
                <li>‚úÖ –ó–Ω–∞–µ—à —á–µ —Ç–æ–∫–µ–Ω–∏—Ç–µ –∏–º–∞—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞ –ø—Ä–æ–¥–∞–∂–±–∞ –ø—ä—Ä–≤–∏—Ç–µ 2 –≥–æ–¥–∏–Ω–∏</li>
                <li>‚úÖ –ü—Ä–∏–µ–º–∞—à —á–µ —Ç–æ–≤–∞ –µ –¥—ä–ª–≥–æ—Å—Ä–æ—á–Ω–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è (min 2 –≥–æ–¥–∏–Ω–∏ hold)</li>
            </ul>
            <p style="margin-top: 15px;"><a href="rules.html" style="color: #fff; text-decoration: underline;">üìñ –ü—Ä–æ—á–µ—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞—Ç–∞ —Ç—É–∫!</a></p>
        </div>

        <!-- –ö–û–ù–¢–ê–ö–¢–ù–ê –§–û–†–ú–ê -->
        <div class="donate-box">
            <h2>üìù –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <p style="color: #ffc107;">–í—Å–∏—á–∫–∏ –ø–æ–ª–µ—Ç–∞ —Å–∞ –ø–æ –∂–µ–ª–∞–Ω–∏–µ, –Ω–æ —Å–∏–ª–Ω–æ –ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–∏!</p>
            
            <div class="form-group">
                <label>–ò–º–µ <span class="optional-tag">(optional)</span></label>
                <input type="text" id="donorName" placeholder="–ò–º–µ –∏–ª–∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º">
                <small>–°–∞–º–æ –±—É–∫–≤–∏, —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –µ "..." –∑–∞ –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç</small>
            </div>
            
            <div class="form-group">
                <label>Email –∞–¥—Ä–µ—Å <span class="optional-tag">(optional, –Ω–æ –°–ò–õ–ù–û –ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–µ–Ω!)</span></label>
                <input type="email" id="donorEmail" placeholder="your-email@example.com">
                <small>‚ö†Ô∏è –ë–ï–ó email –Ω—è–º–∞ –∫–∞–∫ –¥–∞ –ø–æ–ª—É—á–∏—à –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –∏–ª–∏ –ø–æ–º–æ—â –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º!</small>
            </div>
            
            <div class="form-group">
                <label>–¢–µ–ª–µ—Ñ–æ–Ω <span class="optional-tag">(optional)</span></label>
                <input type="tel" id="donorPhone" placeholder="+359 XXX XXX XXX">
                <small>–ó–∞ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—è</small>
            </div>

            <!-- –ê–ù–û–ù–ò–ú–ï–ù –ë–£–¢–û–ù -->
            <div class="anonymous-section">
                <h3 style="color: #ff9800; margin-bottom: 15px;">üé≠ –ò—Å–∫–∞—à –¥–∞ –æ—Å—Ç–∞–Ω–µ—à –∞–Ω–æ–Ω–∏–º–µ–Ω?</h3>
                <p style="color: #b8c5d6; margin-bottom: 20px;">
                    –ù–∞—Ç–∏—Å–Ω–∏ –±—É—Ç–æ–Ω–∞ –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–ø—ä–ª–≤–∞–Ω–µ —Å –∞–Ω–æ–Ω–∏–º–Ω–∏ –¥–∞–Ω–Ω–∏.<br>
                    <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º –Ω—è–º–∞ –∫–∞–∫ –¥–∞ —Ç–µ –Ω–∞–º–µ—Ä–∏–º!
                </p>
                <button type="button" class="btn btn-secondary" onclick="fillAnonymous()" style="max-width: 400px;">
                    üé≠ –ü–æ–ø—ä–ª–Ω–∏ –ê–Ω–æ–Ω–∏–º–Ω–æ!
                </button>
            </div>
        </div>

        <!-- WALLET & DONATION -->
        <div class="donate-box">
            <h2>üíº Wallet & –î–∞—Ä–µ–Ω–∏–µ</h2>
            
            <div class="form-group">
                <label>Wallet –ê–¥—Ä–µ—Å <span style="color: #ff5722;">(–ó–ê–î–™–õ–ñ–ò–¢–ï–õ–ù–û)</span></label>
                <input type="text" id="walletAddress" placeholder="0x..." readonly>
                <small id="walletStatus">üëÜ –°–≤—ä—Ä–∂–∏ wallet-–∞ —Å–∏ –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–ø—ä–ª–≤–∞–Ω–µ</small>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn btn-connect" onclick="connectWallet()" id="connectBtn">
                    ü¶ä –°–≤—ä—Ä–∂–∏ MetaMask
                </button>
            </div>
            
            <div class="form-group">
                <label>–ö–æ–ª–∫–æ BNB –∏—Å–∫–∞—à –¥–∞ –¥–∞—Ä—è–≤–∞—Ç–µ?</label>
                <input type="number" id="bnbAmount" placeholder="–ú–∏–Ω–∏–º—É–º 0.001 BNB" step="0.001" min="0.001">
                <small>üí° –ü—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ: –º–∏–Ω 0.01 BNB</small>
            </div>
            
            <div class="form-group">
                <label>–©–µ –ø–æ–ª—É—á–∏—à (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª–Ω–æ):</label>
                <input type="text" id="expectedTokens" readonly placeholder="0 AMS —Ç–æ–∫–µ–Ω–∏" style="background: #1a2f1a; border-color: #4caf50; font-size: 1.3em; font-weight: bold;">
                <small>üìä –ö—É—Ä—Å: 1000 AMS = 1 BNB</small>
            </div>

            <div class="form-group">
                <label>–ë–µ–ª–µ–∂–∫–∏ <span class="optional-tag">(optional)</span></label>
                <textarea id="notes" rows="3" placeholder="–î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–ª–∏ –±–µ–ª–µ–∂–∫–∏..."></textarea>
            </div>
            
            <div class="checkbox-group">
                <input type="checkbox" id="agreement" required>
                <label for="agreement">
                    <strong>–°—ä–≥–ª–∞—Å—è–≤–∞–º —Å–µ</strong> —Å <a href="rules.html" style="color: #667eea;">–ø—Ä–∞–≤–∏–ª–∞—Ç–∞</a> 
                    –∏ —Ä–∞–∑–±–∏—Ä–∞–º —á–µ —Ç–æ–∫–µ–Ω–∏—Ç–µ —Å–∞ lock-–Ω–∞—Ç–∏ –∑–∞ –ø—ä—Ä–≤–∏—Ç–µ 2 –≥–æ–¥–∏–Ω–∏.
                </label>
            </div>
            
            <button class="btn" id="donateBtn" onclick="donateBNB()" disabled>
                üíé –î–∞—Ä–∏ –°–µ–≥–∞
            </button>
            
            <div id="status" style="margin-top: 20px; padding: 20px; border-radius: 10px; display: none;"></div>
        </div>

        <div class="warning-box">
            <h3>‚ö†Ô∏è –í–∞–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h3>
            <p>üîÑ –í–ª–∏–∑–∞—à –≤ –æ–ø–∞—à–∫–∞ - —á–∞–∫–∞—à –¥–æ 12 —á–∞—Å–∞ (–∏–ª–∏ 30 –º–∏–Ω –ø—Ä–∏ —É—Å–∫–æ—Ä–µ–Ω–∏–µ)</p>
            <p>üí∞ –§–∏–∫—Å–∏—Ä–∞–Ω –∫—É—Ä—Å: 1000 AMS –∑–∞ 1 BNB</p>
            <p>üìß –ü–æ–ª—É—á–∞–≤–∞—à email –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ (–∞–∫–æ —Å–∏ –¥–∞–ª email)</p>
            <p>üéØ –ü—ä—Ä–≤–∏—Ç–µ –≤ –æ–ø–∞—à–∫–∞—Ç–∞ –ø–æ–ª—É—á–∞–≤–∞—Ç –ø—ä—Ä–≤–∏ (FIFO)</p>
        </div>
    </div>

    <script>
        let web3;
        let userAccount;
        const CONTRACT_ADDRESS = 'YOUR_CONTRACT_ADDRESS_HERE';

        // ========================================
        // AUTO-CONNECT WALLET ON LOAD
        // ========================================
        window.addEventListener('load', async () => {
            if (typeof window.ethereum !== 'undefined') {
                web3 = new Web3(window.ethereum);
                
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                    if (accounts.length > 0) {
                        userAccount = accounts[0];
                        autoFillWalletAddress();
                    }
                } catch (error) {
                    console.log('Not connected yet');
                }
                
                window.ethereum.on('accountsChanged', (accounts) => {
                    if (accounts.length > 0) {
                        userAccount = accounts[0];
                        autoFillWalletAddress();
                    }
                });
            }

            // Attach validation listeners
            attachValidationListeners();
            
            // Calculate tokens on BNB input
            document.getElementById('bnbAmount').addEventListener('input', calculateExpectedTokens);
        });

        // ========================================
        // 3. AUTO-FILL WALLET ADDRESS
        // ========================================
        function autoFillWalletAddress() {
            const walletInput = document.getElementById('walletAddress');
            const walletStatus = document.getElementById('walletStatus');
            const connectBtn = document.getElementById('connectBtn');
            const donateBtn = document.getElementById('donateBtn');
            
            if (userAccount && walletInput) {
                walletInput.value = userAccount;
                walletInput.style.background = '#1a2f1a';
                walletInput.style.borderColor = '#4caf50';
                walletStatus.innerHTML = '‚úÖ Wallet —Å–≤—ä—Ä–∑–∞–Ω —É—Å–ø–µ—à–Ω–æ!';
                walletStatus.style.color = '#4caf50';
                connectBtn.textContent = '‚úÖ –°–≤—ä—Ä–∑–∞–Ω';
                connectBtn.disabled = true;
                donateBtn.disabled = false;
                console.log('‚úÖ Wallet auto-filled:', userAccount);
            }
        }

        async function connectWallet() {
            if (typeof window.ethereum === 'undefined') {
                alert('‚ö†Ô∏è –ú–æ–ª—è, –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–π MetaMask!');
                window.open('https://metamask.io/', '_blank');
                return;
            }
            
            try {
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                userAccount = accounts[0];
                autoFillWalletAddress();
            } catch (error) {
                alert('‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ: ' + error.message);
            }
        }

        // ========================================
        // 4. FILL ANONYMOUS BUTTON
        // ========================================
        function fillAnonymous() {
            document.getElementById('donorName').value = '...';
            document.getElementById('donorEmail').value = '...';
            document.getElementById('donorPhone').value = '------';
            
            // Visual feedback
            const btn = event.target;
            const originalText = btn.textContent;
            const originalBg = btn.style.background;
            
            btn.textContent = '‚úÖ –ü–æ–ø—ä–ª–Ω–µ–Ω–æ –∞–Ω–æ–Ω–∏–º–Ω–æ!';
            btn.style.background = 'linear-gradient(135deg, #4caf50 0%, #2e7d32 100%)';
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = originalBg;
            }, 2000);
        }

        // ========================================
        // 5. INPUT VALIDATION
        // ========================================
        function validateName(input) {
            const value = input.value.trim();
            if (value === '...' || value === '') {
                input.classList.remove('invalid');
                input.classList.add('valid');
                return true;
            }
            const nameRegex = /^[–∞-—è–ê-–Ø—ë–Åa-zA-Z\s\.\-]+$/;
            const isValid = nameRegex.test(value);
            input.classList.toggle('invalid', !isValid);
            input.classList.toggle('valid', isValid);
            return isValid;
        }

        function validateEmail(input) {
            const value = input.value.trim();
            if (value === '...' || value === '') {
                input.classList.remove('invalid');
                input.classList.add('valid');
                return true;
            }
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const isValid = emailRegex.test(value);
            input.classList.toggle('invalid', !isValid);
            input.classList.toggle('valid', isValid);
            return isValid;
        }

        function validatePhone(input) {
            const value = input.value.trim();
            if (value === '------' || value === '...' || value === '') {
                input.classList.remove('invalid');
                input.classList.add('valid');
                return true;
            }
            const phoneRegex = /^[+]?[0-9\s()\-]{8,20}$/;
            const isValid = phoneRegex.test(value);
            input.classList.toggle('invalid', !isValid);
            input.classList.toggle('valid', isValid);
            return isValid;
        }

        function validateWallet(input) {
            const value = input.value.trim();
            const hexRegex = /^0x[a-fA-F0-9]{40}$/;
            const isValid = hexRegex.test(value);
            input.classList.toggle('invalid', !isValid);
            input.classList.toggle('valid', isValid);
            return isValid;
        }

        function validateBNB(input) {
            const value = parseFloat(input.value);
            const isValid = !isNaN(value) && value >= 0.001;
            input.classList.toggle('invalid', !isValid);
            input.classList.toggle('valid', isValid);
            return isValid;
        }

        function attachValidationListeners() {
            const nameInput = document.getElementById('donorName');
            const emailInput = document.getElementById('donorEmail');
            const phoneInput = document.getElementById('donorPhone');
            const walletInput = document.getElementById('walletAddress');
            const bnbInput = document.getElementById('bnbAmount');
            
            nameInput.addEventListener('input', () => validateName(nameInput));
            nameInput.addEventListener('blur', () => validateName(nameInput));
            
            emailInput.addEventListener('input', () => validateEmail(emailInput));
            emailInput.addEventListener('blur', () => validateEmail(emailInput));
            
            phoneInput.addEventListener('input', () => validatePhone(phoneInput));
            phoneInput.addEventListener('blur', () => validatePhone(phoneInput));
            
            walletInput.addEventListener('input', () => validateWallet(walletInput));
            walletInput.addEventListener('blur', () => validateWallet(walletInput));
            
            bnbInput.addEventListener('input', () => validateBNB(bnbInput));
            bnbInput.addEventListener('blur', () => validateBNB(bnbInput));
        }

        function calculateExpectedTokens() {
            const bnb = parseFloat(document.getElementById('bnbAmount').value) || 0;
            const tokens = bnb * 1000;
            document.getElementById('expectedTokens').value = tokens.toFixed(2) + ' AMS';
        }

        // ========================================
        // FORM VALIDATION BEFORE SUBMIT
        // ========================================
        function validateForm() {
            const name = document.getElementById('donorName');
            const email = document.getElementById('donorEmail');
            const phone = document.getElementById('donorPhone');
            const wallet = document.getElementById('walletAddress');
            const bnb = document.getElementById('bnbAmount');
            const agreement = document.getElementById('agreement');
            
            let errors = [];
            
            if (!validateName(name)) {
                errors.push('‚ùå –ù–µ–≤–∞–ª–∏–¥–Ω–æ –∏–º–µ! –ò–∑–ø–æ–ª–∑–≤–∞–π —Å–∞–º–æ –±—É–∫–≤–∏ –∏–ª–∏ "..." –∑–∞ –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç.');
            }
            if (!validateEmail(email)) {
                errors.push('‚ùå –ù–µ–≤–∞–ª–∏–¥–µ–Ω email! –ò–∑–ø–æ–ª–∑–≤–∞–π –≤–∞–ª–∏–¥–µ–Ω email –∏–ª–∏ "..." –∑–∞ –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç.');
            }
            if (!validatePhone(phone)) {
                errors.push('‚ùå –ù–µ–≤–∞–ª–∏–¥–µ–Ω —Ç–µ–ª–µ—Ñ–æ–Ω! –ò–∑–ø–æ–ª–∑–≤–∞–π –≤–∞–ª–∏–¥–µ–Ω –Ω–æ–º–µ—Ä –∏–ª–∏ "------" –∑–∞ –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç.');
            }
            if (!validateWallet(wallet)) {
                errors.push('‚ùå –ù–µ–≤–∞–ª–∏–¥–µ–Ω wallet –∞–¥—Ä–µ—Å! –°–≤—ä—Ä–∂–∏ MetaMask.');
            }
            if (!validateBNB(bnb)) {
                errors.push('‚ùå –ù–µ–≤–∞–ª–∏–¥–Ω–∞ BNB —Å—É–º–∞! –ú–∏–Ω–∏–º—É–º 0.001 BNB.');
            }
            if (!agreement.checked) {
                errors.push('‚ùå –¢—Ä—è–±–≤–∞ –¥–∞ —Å–µ —Å—ä–≥–ª–∞—Å–∏—à —Å —É—Å–ª–æ–≤–∏—è—Ç–∞!');
            }
            
            if (errors.length > 0) {
                alert(errors.join('\n\n'));
                return false;
            }
            
            const bnbValue = parseFloat(bnb.value);
            if (bnbValue > 100) {
                if (!confirm('‚ö†Ô∏è –î–∞—Ä—è–≤–∞—Ç–µ –º–Ω–æ–≥–æ –≥–æ–ª—è–º–∞ —Å—É–º–∞ (' + bnbValue + ' BNB)!\n\n–°–∏–≥—É—Ä–Ω–∏ –ª–∏ —Å—Ç–µ?')) {
                    return false;
                }
            }
            
            return true;
        }

        // ========================================
        // DONATE FUNCTION
        // ========================================
        async function donateBNB() {
            if (!validateForm()) return;
            
            const donateBtn = document.getElementById('donateBtn');
            const status = document.getElementById('status');
            
            donateBtn.disabled = true;
            donateBtn.textContent = 'üîÑ –û–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ...';
            
            try {
                const bnbAmount = document.getElementById('bnbAmount').value;
                const name = document.getElementById('donorName').value || '...';
                const email = document.getElementById('donorEmail').value || '...';
                const phone = document.getElementById('donorPhone').value || '------';
                const notes = document.getElementById('notes').value || '';
                
                // Send BNB to contract
                const tx = await web3.eth.sendTransaction({
                    from: userAccount,
                    to: CONTRACT_ADDRESS,
                    value: web3.utils.toWei(bnbAmount, 'ether'),
                    gas: 100000
                });
                
                showStatus('‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ç–∞ –µ –∏–∑–ø—Ä–∞—Ç–µ–Ω–∞! TX: ' + tx.transactionHash, 'success');
                
                // Call backend to save donation
                const response = await fetch('/.netlify/functions/save-donation', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        walletAddress: userAccount,
                        name: name,
                        email: email,
                        phone: phone,
                        bnbAmount: bnbAmount,
                        tokensAmount: (parseFloat(bnbAmount) * 1000).toFixed(2),
                        txHash: tx.transactionHash,
                        variant: 'B',
                        notes: notes
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showStatus('üéâ –£—Å–ø–µ—à–Ω–æ! –î–∞—Ä–µ–Ω–∏–µ—Ç–æ –µ –∑–∞–ø–∏—Å–∞–Ω–æ. –©–µ –ø–æ–ª—É—á–∏—à —Ç–æ–∫–µ–Ω–∏ —Å–∫–æ—Ä–æ!', 'success');
                } else {
                    showStatus('‚ö†Ô∏è –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ç–∞ –º–∏–Ω–∞, –Ω–æ –∏–º–∞ –ø—Ä–æ–±–ª–µ–º —Å—ä—Å –∑–∞–ø–∏—Å–≤–∞–Ω–µ—Ç–æ: ' + result.error, 'warning');
                }
                
            } catch (error) {
                showStatus('‚ùå –ì—Ä–µ—à–∫–∞: ' + error.message, 'error');
            } finally {
                donateBtn.disabled = false;
                donateBtn.textContent = 'üíé –î–∞—Ä–∏ –°–µ–≥–∞';
            }
        }

        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.innerHTML = message;
            status.style.display = 'block';
            
            if (type === 'success') {
                status.style.background = '#4caf50';
            } else if (type === 'error') {
                status.style.background = '#ff5722';
            } else {
                status.style.background = '#ffc107';
                status.style.color = '#000';
            }
        }
    </script>
</body>
</html>
